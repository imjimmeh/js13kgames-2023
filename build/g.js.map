{
  "version": 3,
  "sources": ["../src/ecs/core/component.ts", "../src/ecs/additions/components/controlled-by.ts", "../src/ecs/helpers/maths.ts", "../src/ecs/helpers/maths-vectors.ts", "../src/ecs/additions/components/movement.ts", "../src/ecs/additions/components/colour.ts", "../src/ecs/additions/components/position.ts", "../src/ecs/additions/components/size.ts", "../src/ecs/additions/shape-factory.ts", "../src/ecs/core/system.ts", "../src/ecs/additions/systems/WebGlRenderer.ts", "../src/ecs/additions/systems/input.ts", "../src/ecs/additions/systems/movement.ts", "../src/ecs/core/renderer.ts", "../src/ecs/core/engine.ts", "../src/ecs/core/entity-components.ts", "../src/ecs/core/entity.ts", "../src/webgl/helpers/resize-canvas.ts", "../src/webgl/program.ts", "../src/webgl/shaders/constants.ts", "../src/webgl/shader.ts", "../src/webgl/shaders/fragment.ts", "../src/webgl/shaders/vertex.ts", "../src/webgl/main.ts", "../src/app.ts"],
  "sourcesContent": ["export abstract class Component implements ComponentFields {\r\n  name: string;\r\n\r\n  constructor({ name }: ComponentFields) {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\ntype ComponentFields = {\r\n  name: string;\r\n};\r\n", "import { Component } from \"../../core/component\";\r\n\r\nexport class ControlledByComponent extends Component {\r\n  controlledBy: ControlledBy;\r\n\r\n  constructor(controlledBy: ControlledBy) {\r\n    super({ name: \"ControlledBy\" });\r\n    this.controlledBy = controlledBy;\r\n  }\r\n}\r\n\r\nexport enum ControlledBy {\r\n  Player = \"Player\",\r\n  AI = \"AI\",\r\n}\r\n", "export const lerp = (start: number, end: number, factor: number) =>\r\n  (start + (end - start)) * factor;\r\n\r\nexport const approxZero = (n: number) => n < 0.00001 && n > -0.00001;\r\n", "import { Vector } from \"../additions/components/position\";\r\nimport { approxZero, lerp } from \"./maths\";\r\n\r\nexport const lerpVector = (a: Vector, b: Vector, factor: number): Vector => {\r\n  const x = lerp(a.x, b.x, factor);\r\n  const y = lerp(a.y, b.y, factor);\r\n\r\n  return {\r\n    x,\r\n    y,\r\n  };\r\n};\r\n\r\nexport const addVector = (a: Vector, b: Vector): Vector => {\r\n  return {\r\n    x: a.x + b.x,\r\n    y: a.y + b.y,\r\n  };\r\n};\r\n\r\nexport const multiplyVector = (a: Vector, b: number): Vector => {\r\n  return {\r\n    x: a.x * b,\r\n    y: a.y * b,\r\n  };\r\n};\r\n\r\nexport const approxZeroVector = ({ x, y }: Vector): boolean =>\r\n  approxZero(x) && approxZero(y);\r\n\r\nexport const clampVector = (v: Vector, min: number, max: number): Vector => {\r\n  return {\r\n    x: Math.min(Math.max(v.x, min), max),\r\n    y: Math.min(Math.max(v.y, min), max),\r\n  };\r\n};\r\n", "import { Component } from \"../../core/component\";\r\nimport { approxZero } from \"../../helpers/maths\";\r\nimport {\r\n  addVector,\r\n  approxZeroVector,\r\n  lerpVector,\r\n  multiplyVector,\r\n} from \"../../helpers/maths-vectors\";\r\nimport { Vector } from \"./position\";\r\n\r\nexport const MovementName = \"Movement\";\r\n\r\nexport class Movement extends Component {\r\n  vector: Vector;\r\n  acceleration: Vector = { x: 0, y: 0 };\r\n  velocity: Vector = { x: 0, y: 0 };\r\n  maxSpeed: number;\r\n\r\n  constructor({ vector, maxSpeed }: Partial<Movement>) {\r\n    super({ name: MovementName });\r\n    this.vector = vector ?? { x: 0, y: 0 };\r\n    this.maxSpeed = maxSpeed ?? 2;\r\n  }\r\n\r\n  updateSpeed() {\r\n    if (approxZero(this.vector.x)) {\r\n      this.velocity.x = 0;\r\n      this.acceleration.x = 0;\r\n    }\r\n    if (approxZero(this.vector.y)) {\r\n      this.velocity.y = 0;\r\n      this.acceleration.y = 0;\r\n    }\r\n\r\n    if (approxZeroVector(this.vector)) {\r\n      return;\r\n    }\r\n\r\n    this.acceleration = addVector(\r\n      this.acceleration,\r\n      multiplyVector(this.vector, 0.1)\r\n    );\r\n\r\n    this.velocity = lerpVector(\r\n      this.velocity,\r\n      addVector(this.velocity, this.acceleration),\r\n      1\r\n    );\r\n\r\n    const negativeMaxSpeed = this.maxSpeed * -1;\r\n\r\n    if (this.velocity.x > this.maxSpeed) {\r\n      this.velocity.x = this.maxSpeed;\r\n    } else if (this.velocity.x < negativeMaxSpeed) {\r\n      this.velocity.x = negativeMaxSpeed;\r\n    }\r\n\r\n    if (this.velocity.y > this.maxSpeed) {\r\n      this.velocity.y = this.maxSpeed;\r\n    } else if (this.velocity.y < negativeMaxSpeed) {\r\n      this.velocity.y = negativeMaxSpeed;\r\n    }\r\n  }\r\n}\r\n", "import { Component } from \"../../core/component\";\r\n\r\nexport interface IColour {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n  a: number;\r\n}\r\n\r\nexport class Colour extends Component implements IColour {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n  a: number;\r\n\r\n  constructor({ r, g, b, a }: IColour) {\r\n    super({ name: \"Colour\" });\r\n    this.r = r;\r\n    this.g = g;\r\n    this.b = b;\r\n    this.a = a;\r\n\r\n    this.toRgb = this.toRgb.bind(this);\r\n  }\r\n\r\n  toRgb = (): string => `rgb(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n}\r\n", "import { Component } from \"../../core/component\";\r\n\r\nexport const PositionName = \"Position\";\r\n\r\nexport class Position extends Component implements Vector {\r\n  x: number;\r\n  y: number;\r\n\r\n  constructor({ x, y }: Partial<Position>) {\r\n    super({ name: PositionName });\r\n\r\n    this.x = x ?? 0;\r\n    this.y = y ?? 0;\r\n  }\r\n}\r\n\r\nexport type Vector = {\r\n  x: number;\r\n  y: number;\r\n};\r\n", "import { Component } from \"../../core/component\";\r\n\r\nexport interface ISize {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport class Size extends Component implements ISize {\r\n  width: number;\r\n  height: number;\r\n\r\n  constructor({ width, height }: ISize) {\r\n    super({ name: \"Size\" });\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n}\r\n", "import { Colour } from \"./components/colour\";\r\nimport { Position } from \"./components/position\";\r\nimport { Size } from \"./components/size\";\r\n\r\nfunction* createRectangle() {\r\n  yield new Colour({ r: 255, g: 0, b: 0, a: 255 });\r\n  yield new Position({ x: 0, y: 0 });\r\n  yield new Size({ width: 200, height: 200 });\r\n}\r\n\r\nexport { createRectangle };\r\n", "import { IEngine } from \"./engine\";\r\nimport { Entity } from \"./entity\";\r\n\r\nexport abstract class System {\r\n  abstract accepts(entity: Entity): boolean;\r\n\r\n  abstract init(): void;\r\n\r\n  abstract update({ entities, systems }: IEngine): void;\r\n\r\n  getAcceptedEntities(entities: Entity[]): IterableIterator<Entity> {\r\n    return getEntitiesForQuery(entities, this);\r\n  }\r\n}\r\n\r\nconst getEntitiesForQuery = function* (\r\n  entities: Entity[],\r\n  system: System\r\n): IterableIterator<Entity> {\r\n  for (const entity of entities) {\r\n    if (system.accepts(entity)) {\r\n      yield entity;\r\n    }\r\n  }\r\n};\r\n", "import { WebGl } from \"../../../webgl/main\";\r\nimport { IEngine } from \"../../core/engine\";\r\nimport { Entity } from \"../../core/entity\";\r\nimport { System } from \"../../core/system\";\r\nimport { Colour } from \"../components/colour\";\r\nimport { Position, PositionName } from \"../components/position\";\r\nimport { Size } from \"../components/size\";\r\n\r\nexport class WebGlRenderer extends System {\r\n  webgl: WebGl;\r\n\r\n  constructor(webgl: WebGl) {\r\n    super();\r\n    this.webgl = webgl;\r\n  }\r\n\r\n  accepts(entity: Entity): boolean {\r\n    return (\r\n      entity.components.has(\"Size\") &&\r\n      entity.components.has(PositionName) &&\r\n      entity.components.has(\"Colour\")\r\n    );\r\n  }\r\n\r\n  init(): void {}\r\n\r\n  update({ entities, systems }: IEngine): void {\r\n    this.webgl.startDraw();\r\n\r\n    for (const entity of this.getAcceptedEntities(entities)) {\r\n      const size = entity.components.get<Size>(\"Size\")!;\r\n      const position = entity.components.get<Position>(PositionName)!;\r\n      const colour = entity.components.get<Colour>(\"Colour\")!;\r\n\r\n      const rectangle = createRectangle(\r\n        position.x,\r\n        position.y,\r\n        size.width,\r\n        size.height\r\n      );\r\n      this.webgl.gl.bufferData(\r\n        this.webgl.gl.ARRAY_BUFFER,\r\n        rectangle,\r\n        this.webgl.gl.STATIC_DRAW\r\n      );\r\n\r\n      // Set a random color.\r\n      this.webgl.gl.uniform4f(\r\n        this.webgl.colourLocation!,\r\n        colour.r,\r\n        colour.g,\r\n        colour.b,\r\n        1\r\n      );\r\n\r\n      // Draw the rectangle.\r\n      var primitiveType = this.webgl.gl.TRIANGLES;\r\n      var offset = 0;\r\n      var count = 6;\r\n      this.webgl.gl.drawArrays(primitiveType, offset, count);\r\n    }\r\n  }\r\n}\r\n\r\nconst createRectangle = (\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number\r\n): Float32Array => {\r\n  const x1 = x;\r\n  const x2 = x + width;\r\n  const y1 = y;\r\n  const y2 = y + height;\r\n\r\n  return new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]);\r\n};\r\n", "import { IEngine } from \"../../core/engine\";\r\nimport { Entity } from \"../../core/entity\";\r\nimport { System } from \"../../core/system\";\r\nimport {\r\n  ControlledBy,\r\n  ControlledByComponent,\r\n} from \"../components/controlled-by\";\r\nimport { Movement, MovementName } from \"../components/movement\";\r\n\r\nexport class InputSystem extends System {\r\n  keyStates: Map<string, KeyState> = new Map<string, KeyState>();\r\n\r\n  constructor() {\r\n    super();\r\n    this.init = this.init.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n    this.onKeyUp = this.onKeyUp.bind(this);\r\n  }\r\n\r\n  accepts(entity: Entity): boolean {\r\n    const component =\r\n      entity.components.get<ControlledByComponent>(\"ControlledBy\");\r\n\r\n    if (!component) return false;\r\n\r\n    return (\r\n      component.controlledBy == ControlledBy.Player &&\r\n      entity.components.has(MovementName)\r\n    );\r\n  }\r\n\r\n  init(): void {\r\n    document.addEventListener(\"keydown\", this.onKeyDown);\r\n    document.addEventListener(\"keyup\", this.onKeyUp);\r\n  }\r\n\r\n  update({ entities }: IEngine): void {\r\n    for (const state of this.keyStates) {\r\n      if (state[1] == KeyState.Pressed) {\r\n        this.keyStates.set(state[0], KeyState.Held);\r\n      }\r\n    }\r\n\r\n    const xDirection = this.getAxisVector(\"ArrowRight\", \"ArrowLeft\");\r\n    const yDirection = this.getAxisVector(\"ArrowUp\", \"ArrowDown\");\r\n\r\n    for (const entity of this.getAcceptedEntities(entities)) {\r\n      const movement = entity.components.get<Movement>(MovementName);\r\n      movement!.vector.y = yDirection;\r\n      movement!.vector.x = xDirection;\r\n    }\r\n  }\r\n\r\n  private getAxisVector(positiveKey: string, negativeKey: string) {\r\n    const up =\r\n      (this.keyStates.get(positiveKey) ?? KeyState.Released) !=\r\n      KeyState.Released\r\n        ? 1\r\n        : 0;\r\n\r\n    const down =\r\n      (this.keyStates.get(negativeKey) ?? KeyState.Released) !=\r\n      KeyState.Released\r\n        ? -1\r\n        : 0;\r\n\r\n    return up + down;\r\n  }\r\n\r\n  onKeyDown(event: KeyboardEvent) {\r\n    this.keyStates.set(event.key, KeyState.Pressed);\r\n  }\r\n\r\n  onKeyUp(event: KeyboardEvent) {\r\n    this.keyStates.set(event.key, KeyState.Released);\r\n  }\r\n}\r\n\r\nenum KeyState {\r\n  Released = \"Released\",\r\n  Pressed = \"Pressed\",\r\n  Held = \"Held\",\r\n}\r\n", "import { IEngine } from \"../../core/engine\";\r\nimport { Entity } from \"../../core/entity\";\r\nimport { System } from \"../../core/system\";\r\nimport { Movement, MovementName } from \"../components/movement\";\r\nimport { Position, PositionName } from \"../components/position\";\r\n\r\nexport class MovementSystem extends System {\r\n  accepts(entity: Entity): boolean {\r\n    return (\r\n      entity.components.has(PositionName) && entity.components.has(MovementName)\r\n    );\r\n  }\r\n\r\n  init(): void {}\r\n\r\n  update({ entities }: IEngine): void {\r\n    for (const entity of this.getAcceptedEntities(entities)) {\r\n      const position = entity.components.get<Position>(PositionName)!;\r\n      const movement = entity.components.get<Movement>(MovementName)!;\r\n\r\n      movement.updateSpeed();\r\n\r\n      position.x += movement.acceleration.x;\r\n      position.y += movement.acceleration.y;\r\n    }\r\n  }\r\n}\r\n", "export class Renderer {\r\n  private _canvas: HTMLCanvasElement;\r\n  private _context: CanvasRenderingContext2D;\r\n\r\n  constructor() {\r\n    const canvas = document.querySelector(\"canvas\");\r\n\r\n    if (!canvas) throw \"Could not find canvas\";\r\n\r\n    this._canvas = canvas;\r\n    this._context = this._canvas.getContext(\"2d\")!;\r\n  }\r\n\r\n  get canvas(): HTMLCanvasElement {\r\n    return this._canvas;\r\n  }\r\n\r\n  get context(): CanvasRenderingContext2D {\r\n    return this._context;\r\n  }\r\n\r\n  init() {\r\n    this._canvas.width = window.innerWidth;\r\n    this._canvas.height = window.innerHeight;\r\n  }\r\n\r\n  clearCanvas() {\r\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n  }\r\n}\r\n\r\nlet _instance: Renderer | null = null;\r\n\r\nexport const instance = (): Renderer => {\r\n  if (!_instance) {\r\n    _instance = new Renderer();\r\n  }\r\n\r\n  return _instance;\r\n};\r\n", "import { Entity } from \"./entity\";\r\nimport { instance } from \"./renderer\";\r\nimport { System } from \"./system\";\r\n\r\nexport class Engine implements IEngine {\r\n  systems: System[] = [];\r\n  entities: Entity[] = [];\r\n\r\n  constructor() {\r\n    this.update = this.update.bind(this);\r\n  }\r\n\r\n  init() {\r\n    instance().init();\r\n\r\n    for (const entity of this.entities) {\r\n      entity.init();\r\n    }\r\n\r\n    for (const system of this.systems) {\r\n      system.init();\r\n    }\r\n\r\n    window.requestAnimationFrame(this.update);\r\n  }\r\n\r\n  update() {\r\n    for (const system of this.systems) {\r\n      system.update({ entities: this.entities, systems: this.systems });\r\n    }\r\n\r\n    console.log(`ran update`);\r\n\r\n    window.requestAnimationFrame(this.update);\r\n  }\r\n}\r\n\r\nexport interface IEngine {\r\n  systems: System[];\r\n  entities: Entity[];\r\n}\r\n", "import { Component } from \"./component\";\r\n\r\nexport class Components {\r\n  private components: Map<string, Component> = new Map<string, Component>();\r\n\r\n  add(component: Component): void {\r\n    this.components.set(component.name, component);\r\n  }\r\n\r\n  get<T extends Component>(name: string): T | undefined {\r\n    const component = this.components.get(name);\r\n    if (!component) return undefined;\r\n\r\n    return component as T;\r\n  }\r\n\r\n  has(name: string): boolean {\r\n    return this.components.has(name);\r\n  }\r\n\r\n  all(): IterableIterator<Component> {\r\n    return this.components.values();\r\n  }\r\n}\r\n", "import { Components } from \"./entity-components\";\r\n\r\nexport class Entity {\r\n  components: Components = new Components();\r\n  name: string = \"\";\r\n\r\n  init(): void {\r\n    for (const component of this.components.all()) {\r\n      console.log(component);\r\n    }\r\n\r\n    console.log(`initialised`, this);\r\n  }\r\n}\r\n", "export const resizeCanvasToDisplaySize = (canvas: HTMLCanvasElement) => {\r\n  // Lookup the size the browser is displaying the canvas in CSS pixels.\r\n  const dpr = window.devicePixelRatio;\r\n  const { width, height } = canvas.getBoundingClientRect();\r\n  const displayWidth = Math.round(width * dpr);\r\n  const displayHeight = Math.round(height * dpr);\r\n\r\n  // Check if the canvas is not the same size.\r\n  const needResize =\r\n    canvas.width != displayWidth || canvas.height != displayHeight;\r\n\r\n  if (needResize) {\r\n    // Make the canvas the same size\r\n    canvas.width = displayWidth;\r\n    canvas.height = displayHeight;\r\n  }\r\n\r\n  return needResize;\r\n};\r\n", "import { Shader } from \"./shader\";\r\n\r\nexport class Program {\r\n  private _program?: WebGLProgram;\r\n  readonly fragmentShader: Shader;\r\n  readonly vertexShader: Shader;\r\n\r\n  constructor({ fragmentShader, vertexShader }: Partial<Program>) {\r\n    if (!fragmentShader || !vertexShader) throw `Shaders must exist`;\r\n\r\n    this.fragmentShader = fragmentShader;\r\n    this.vertexShader = vertexShader;\r\n  }\r\n\r\n  get program(): WebGLProgram | undefined {\r\n    return this._program;\r\n  }\r\n\r\n  create(gl: WebGL2RenderingContext): WebGLProgram {\r\n    const program = gl.createProgram();\r\n\r\n    if (!program) throw `Error creating program`;\r\n\r\n    gl.attachShader(program, this.vertexShader.compileShader(gl));\r\n    gl.attachShader(program, this.fragmentShader.compileShader(gl));\r\n    gl.linkProgram(program);\r\n\r\n    if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n      this._program = program;\r\n      return program;\r\n    }\r\n\r\n    const error = gl.getProgramInfoLog(program);\r\n    gl.deleteProgram(program);\r\n    throw error;\r\n  }\r\n}\r\n", "export const ShaderVars = {\r\n  Position: \"a_position\",\r\n  Resolution: \"u_resolution\",\r\n  Colour: \"u_colour\",\r\n};\r\n", "export class Shader {\r\n  private _compiledShader?: WebGLShader;\r\n  readonly source: string;\r\n  readonly type: ShaderType;\r\n\r\n  constructor({ source, type }: Partial<Shader>) {\r\n    if (!source) throw `Source cannot be null`;\r\n    if (!type) throw `Type cannot be null`;\r\n\r\n    this.source = source;\r\n    this.type = type;\r\n  }\r\n\r\n  get compiledShader(): WebGLShader | undefined {\r\n    return this._compiledShader;\r\n  }\r\n\r\n  compileShader(gl: WebGL2RenderingContext): WebGLShader {\r\n    const shader = gl.createShader(this.type);\r\n    if (!shader) throw `Error creating shader`;\r\n\r\n    gl.shaderSource(shader, this.source);\r\n    gl.compileShader(shader);\r\n\r\n    if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n      this._compiledShader = shader;\r\n      return shader;\r\n    }\r\n\r\n    const error = gl.getShaderInfoLog(shader);\r\n    gl.deleteShader(shader);\r\n\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport enum ShaderType {\r\n  \"Vertex\" = 0x8b31,\r\n  \"Fragment\" = 0x8b30,\r\n}\r\n", "import { Shader, ShaderType } from \"../shader\";\r\n\r\nconst shaderSource = `#version 300 es\r\n     \r\n// fragment shaders don't have a default precision so we need\r\n// to pick one. highp is a good default. It means \"high precision\"\r\nprecision highp float;\r\n \r\nuniform vec4 u_colour;\r\n\r\n// we need to declare an output for the fragment shader\r\nout vec4 outColour;\r\n \r\nvoid main() {\r\n  // Just set the output to a constant reddish-purple\r\n  outColour = u_colour;\r\n}`;\r\n\r\nexport const fragmentShader = new Shader({\r\n  source: shaderSource,\r\n  type: ShaderType.Fragment,\r\n});\r\n", "import { Shader, ShaderType } from \"../shader\";\r\n\r\nconst source = `#version 300 es\r\n \r\n// an attribute is an input (in) to a vertex shader.\r\n// It will receive data from a buffer\r\nin vec2 a_position;\r\n \r\nuniform vec2 u_resolution; \r\n// all shaders have a main function\r\nvoid main() {\r\n  // convert the position from pixels to 0.0 to 1.0\r\n  vec2 zeroToOne = a_position / u_resolution;\r\n\r\n  // convert from 0->1 to 0->2\r\n  vec2 zeroToTwo = zeroToOne * 2.0;\r\n\r\n  // convert from 0->2 to -1->+1 (clip space)\r\n  vec2 clipSpace = zeroToTwo - 1.0;\r\n\r\n  // gl_Position is a special variable a vertex shader\r\n  // is responsible for setting\r\n  gl_Position = vec4(clipSpace, 0, 1);\r\n}`;\r\n\r\nexport const vertexShader = new Shader({\r\n  source: source,\r\n  type: ShaderType.Vertex,\r\n});\r\n", "import { resizeCanvasToDisplaySize } from \"./helpers/resize-canvas\";\r\nimport { Program } from \"./program\";\r\nimport { ShaderVars } from \"./shaders/constants\";\r\nimport { fragmentShader } from \"./shaders/fragment\";\r\nimport { vertexShader } from \"./shaders/vertex\";\r\n\r\nexport class WebGl {\r\n  gl: WebGL2RenderingContext;\r\n  canvas: HTMLCanvasElement;\r\n\r\n  program: Program;\r\n\r\n  colourLocation?: WebGLUniformLocation;\r\n  positionLocation?: number;\r\n  resolutionLocation?: WebGLUniformLocation;\r\n\r\n  constructor({ canvas }: { canvas: HTMLCanvasElement }) {\r\n    this.canvas = canvas;\r\n\r\n    const gl = canvas.getContext(\"webgl2\");\r\n\r\n    if (!gl) throw `Could not find WebGL2 context`;\r\n\r\n    this.gl = gl;\r\n    this.program = new Program({\r\n      fragmentShader: fragmentShader,\r\n      vertexShader: vertexShader,\r\n    });\r\n    this.program.create(this.gl);\r\n  }\r\n\r\n  init() {\r\n    const program = this.program.program!;\r\n\r\n    this.getPositionLocation(program);\r\n    this.getResolutionLocation(program);\r\n    this.getColourLocation(program);\r\n\r\n    // Create a buffer and put three 2d clip space points in it\r\n    const positionBuffer = this.gl.createBuffer();\r\n\r\n    // Bind it to ARRAY_BUFFER (think of it as ARRAY_BUFFER = positionBuffer)\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, positionBuffer);\r\n  }\r\n\r\n  //TODO: Move most/all this to program\r\n  startDraw() {\r\n    const vao = this.gl.createVertexArray();\r\n\r\n    // and make it the one we're currently working with\r\n    this.gl.bindVertexArray(vao);\r\n\r\n    // Turn on the attribute\r\n    this.gl.enableVertexAttribArray(this.positionLocation!);\r\n\r\n    // Tell the attribute how to get data out of positionBuffer (ARRAY_BUFFER)\r\n    const size = 2; // 2 components per iteration\r\n    const type = this.gl.FLOAT; // the data is 32bit floats\r\n    const normalize = false; // don't normalize the data\r\n    const stride = 0; // 0 = move forward size * sizeof(type) each iteration to get the next position\r\n    const offset = 0; // start at the beginning of the buffer\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation!,\r\n      size,\r\n      type,\r\n      normalize,\r\n      stride,\r\n      offset\r\n    );\r\n\r\n    resizeCanvasToDisplaySize(this.gl.canvas as HTMLCanvasElement);\r\n\r\n    // Tell WebGL how to convert from clip space to pixels\r\n    this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\r\n\r\n    // Clear the canvas\r\n    this.gl.clearColor(0, 0, 0, 0);\r\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n    // Tell it to use our program (pair of shaders)\r\n    this.gl.useProgram(this.program.program!);\r\n    this.gl.uniform2f(\r\n      this.resolutionLocation!,\r\n      this.gl.canvas.width,\r\n      this.gl.canvas.height\r\n    );\r\n    // Bind the attribute/buffer set we want.\r\n    this.gl.bindVertexArray(vao);\r\n  }\r\n\r\n  private getResolutionLocation(program: WebGLProgram) {\r\n    this.resolutionLocation =\r\n      this.gl.getUniformLocation(program, ShaderVars.Resolution) ?? undefined;\r\n\r\n    if (!this.resolutionLocation) throw `Could not get resolution location`;\r\n  }\r\n\r\n  private getColourLocation(program: WebGLProgram) {\r\n    this.colourLocation =\r\n      this.gl.getUniformLocation(program, ShaderVars.Colour) ?? undefined;\r\n\r\n    if (!this.colourLocation) throw `Could not find colour uniform`;\r\n  }\r\n\r\n  private getPositionLocation(program: WebGLProgram) {\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      program,\r\n      ShaderVars.Position\r\n    );\r\n    if (this.positionLocation < 0) throw `Could not find position attribute`;\r\n  }\r\n}\r\n", "import {\r\n  ControlledBy,\r\n  ControlledByComponent,\r\n} from \"./ecs/additions/components/controlled-by\";\r\nimport { Movement } from \"./ecs/additions/components/movement\";\r\nimport { createRectangle } from \"./ecs/additions/shape-factory\";\r\nimport { WebGlRenderer } from \"./ecs/additions/systems/WebGlRenderer\";\r\nimport { InputSystem } from \"./ecs/additions/systems/input\";\r\nimport { MovementSystem } from \"./ecs/additions/systems/movement\";\r\nimport { Engine } from \"./ecs/core/engine\";\r\nimport { Entity } from \"./ecs/core/entity\";\r\nimport { WebGl } from \"./webgl/main\";\r\n\r\nconst canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n\r\nif (!canvas) throw `Couldn;'t find canvas`;\r\n\r\nconst webgl = new WebGl({ canvas });\r\nwebgl.init();\r\n\r\nconst player = new Entity();\r\nplayer.name = \"Player\";\r\n\r\nfor (const component of createRectangle()) {\r\n  player.components.add(component);\r\n}\r\n\r\nplayer.components.add(new Movement({}));\r\nplayer.components.add(new ControlledByComponent(ControlledBy.Player));\r\n\r\nconst engine = new Engine();\r\nengine.entities.push(player);\r\nengine.systems.push(new InputSystem());\r\nengine.systems.push(new MovementSystem());\r\nengine.systems.push(new WebGlRenderer(webgl));\r\nengine.init();\r\n"],
  "mappings": "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",
  "names": ["Component", "name", "ControlledByComponent", "Component", "controlledBy", "lerp", "start", "end", "factor", "approxZero", "n", "lerpVector", "a", "b", "factor", "x", "lerp", "y", "addVector", "multiplyVector", "approxZeroVector", "approxZero", "MovementName", "Movement", "Component", "vector", "maxSpeed", "approxZero", "approxZeroVector", "addVector", "multiplyVector", "lerpVector", "negativeMaxSpeed", "Colour", "Component", "r", "g", "b", "a", "PositionName", "Position", "Component", "x", "y", "Size", "Component", "width", "height", "createRectangle", "Colour", "Position", "Size", "System", "entities", "getEntitiesForQuery", "system", "entity", "WebGlRenderer", "System", "webgl", "entity", "PositionName", "entities", "systems", "size", "position", "colour", "rectangle", "createRectangle", "primitiveType", "offset", "count", "x", "y", "width", "height", "x1", "x2", "y1", "y2", "InputSystem", "System", "entity", "component", "MovementName", "entities", "state", "xDirection", "yDirection", "movement", "positiveKey", "negativeKey", "up", "down", "event", "MovementSystem", "System", "entity", "PositionName", "MovementName", "entities", "position", "movement", "Renderer", "canvas", "_instance", "instance", "Engine", "instance", "entity", "system", "Components", "component", "name", "Entity", "Components", "component", "resizeCanvasToDisplaySize", "canvas", "dpr", "width", "height", "displayWidth", "displayHeight", "needResize", "Program", "fragmentShader", "vertexShader", "gl", "program", "error", "ShaderVars", "Shader", "source", "type", "gl", "shader", "error", "shaderSource", "fragmentShader", "Shader", "source", "vertexShader", "Shader", "WebGl", "canvas", "gl", "Program", "fragmentShader", "vertexShader", "program", "positionBuffer", "vao", "size", "type", "normalize", "stride", "offset", "resizeCanvasToDisplaySize", "ShaderVars", "canvas", "webgl", "WebGl", "player", "Entity", "component", "createRectangle", "Movement", "ControlledByComponent", "engine", "Engine", "InputSystem", "MovementSystem", "WebGlRenderer"]
}
